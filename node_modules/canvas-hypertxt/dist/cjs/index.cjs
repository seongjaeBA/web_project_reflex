"use strict";var z=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var x=(o,e)=>{for(var n in e)z(o,n,{get:e[n],enumerable:!0})},L=(o,e,n,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of _(e))!D.call(o,s)&&s!==n&&z(o,s,{get:()=>e[s],enumerable:!(c=T(e,s))||c.enumerable});return o};var P=o=>L(z({},"__esModule",{value:!0}),o);var V={};x(V,{clearCache:()=>w,split:()=>R});module.exports=P(V);var d=new Map,b=new Map,k=new Map;function w(){d.clear(),k.clear(),b.clear()}function W(o,e,n,c,s){var t,r,a;let f=0,u={};for(let i of o)f+=(t=n.get(i))!=null?t:s,u[i]=((r=u[i])!=null?r:0)+1;let g=e-f;for(let i of Object.keys(u)){let m=u[i],l=(a=n.get(i))!=null?a:s,h=l*m/f,M=g*h*c/m,C=l+M;n.set(i,C)}}function j(o,e){var t;let n=new Map,c=0;for(let r of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let a=o.measureText(r).width;n.set(r,a),c+=a}let s=c/n.size,f=3,u=(e/s+f)/(f+1),g=n.keys();for(let r of g)n.set(r,((t=n.get(r))!=null?t:s)*u);return n}function p(o,e,n,c){var g,t;let s=b.get(n);if(c&&s!==void 0&&s.count>2e4){let r=k.get(n);if(r===void 0&&(r=j(o,s.size),k.set(n,r)),s.count>5e5){let i=0;for(let m of e)i+=(g=r.get(m))!=null?g:s.size;return i*1.01}let a=o.measureText(e);return W(e,a.width,r,Math.max(.05,1-s.count/2e5),s.size),b.set(n,{count:s.count+e.length,size:s.size}),a.width}let f=o.measureText(e),u=f.width/e.length;if(((t=s==null?void 0:s.count)!=null?t:0)>2e4)return f.width;if(s===void 0)b.set(n,{count:e.length,size:u});else{let r=u-s.size,a=e.length/(s.count+e.length),i=s.size+r*a;b.set(n,{count:s.count+e.length,size:i})}return f.width}function I(o,e,n,c,s,f,u,g){if(e.length<=1)return e.length;if(s<n)return-1;let t=Math.floor(n/s*f),r=p(o,e.slice(0,Math.max(0,t)),c,u),a=g==null?void 0:g(e);if(r!==n)if(r<n){for(;r<n;)t++,r=p(o,e.slice(0,Math.max(0,t)),c,u);t--}else for(;r>n;){let i=a!==void 0?0:e.lastIndexOf(" ",t-1);i>0?t=i:t--,r=p(o,e.slice(0,Math.max(0,t)),c,u)}if(e[t]!==" "){let i=0;if(a===void 0)i=e.lastIndexOf(" ",t);else for(let m of a){if(m>t)break;i=m}i>0&&(t=i)}return t}function R(o,e,n,c,s,f){let u=`${e}_${n}_${c}px`,g=d.get(u);if(g!==void 0)return g;if(c<=0)return[];let t=[],r=e.split(`
`),a=b.get(n),i=a===void 0?e.length:c/a.size*1.5,m=s&&a!==void 0&&a.count>2e4;for(let l of r){let h=p(o,l.slice(0,Math.max(0,i)),n,m),M=Math.min(l.length,i);if(h<=c)t.push(l);else{for(;h>c;){let C=I(o,l,c,n,h,M,m,f),v=l.slice(0,Math.max(0,C));l=l.slice(v.length),t.push(v),h=p(o,l.slice(0,Math.max(0,i)),n,m),M=Math.min(l.length,i)}h>0&&t.push(l)}}return t=t.map((l,h)=>h===0?l.trimEnd():l.trim()),d.set(u,t),d.size>500&&d.delete(d.keys().next().value),t}
//# sourceMappingURL=index.cjs.map
