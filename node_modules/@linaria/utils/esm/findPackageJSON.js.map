{"version":3,"file":"findPackageJSON.js","names":["dirname","isAbsolute","findUp","cache","Map","findPackageJSON","pkgName","filename","pkgPath","require","resolve","paths","has","set","sync","cwd","get","er","code","undefined"],"sources":["../src/findPackageJSON.ts"],"sourcesContent":["import { dirname, isAbsolute } from 'path';\n\nimport findUp from 'find-up';\n\nconst cache = new Map<string, string | undefined>();\n\nexport function findPackageJSON(\n  pkgName: string,\n  filename: string | null | undefined\n) {\n  try {\n    const pkgPath =\n      pkgName === '.' && filename && isAbsolute(filename)\n        ? filename\n        : require.resolve(\n            pkgName,\n            filename ? { paths: [dirname(filename)] } : {}\n          );\n    if (!cache.has(pkgPath)) {\n      cache.set(pkgPath, findUp.sync('package.json', { cwd: pkgPath }));\n    }\n\n    return cache.get(pkgPath);\n  } catch (er: unknown) {\n    if (\n      typeof er === 'object' &&\n      er !== null &&\n      (er as { code?: unknown }).code === 'MODULE_NOT_FOUND'\n    ) {\n      return undefined;\n    }\n\n    throw er;\n  }\n}\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,UAAU,QAAQ,MAAM;AAE1C,OAAOC,MAAM,MAAM,SAAS;AAE5B,MAAMC,KAAK,GAAG,IAAIC,GAAG,CAA6B,CAAC;AAEnD,OAAO,SAASC,eAAeA,CAC7BC,OAAe,EACfC,QAAmC,EACnC;EACA,IAAI;IACF,MAAMC,OAAO,GACXF,OAAO,KAAK,GAAG,IAAIC,QAAQ,IAAIN,UAAU,CAACM,QAAQ,CAAC,GAC/CA,QAAQ,GACRE,OAAO,CAACC,OAAO,CACbJ,OAAO,EACPC,QAAQ,GAAG;MAAEI,KAAK,EAAE,CAACX,OAAO,CAACO,QAAQ,CAAC;IAAE,CAAC,GAAG,CAAC,CAC/C,CAAC;IACP,IAAI,CAACJ,KAAK,CAACS,GAAG,CAACJ,OAAO,CAAC,EAAE;MACvBL,KAAK,CAACU,GAAG,CAACL,OAAO,EAAEN,MAAM,CAACY,IAAI,CAAC,cAAc,EAAE;QAAEC,GAAG,EAAEP;MAAQ,CAAC,CAAC,CAAC;IACnE;IAEA,OAAOL,KAAK,CAACa,GAAG,CAACR,OAAO,CAAC;EAC3B,CAAC,CAAC,OAAOS,EAAW,EAAE;IACpB,IACE,OAAOA,EAAE,KAAK,QAAQ,IACtBA,EAAE,KAAK,IAAI,IACVA,EAAE,CAAwBC,IAAI,KAAK,kBAAkB,EACtD;MACA,OAAOC,SAAS;IAClB;IAEA,MAAMF,EAAE;EACV;AACF"}